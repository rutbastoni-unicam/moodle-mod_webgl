{"version":3,"file":"unitygame.min.js","sources":["../src/unitygame.js"],"sourcesContent":["//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/messages/>.\nimport {call as fetchMany} from 'core/ajax';\nimport $ from 'jquery';\n\n/**\n * Handle progress game from Unity interface to Moodle\n *\n * @module     mod_webgl\n */\nwindow.mod_webgl_plugin = {\n    initted: false,\n    trackGameViewed: () => {},\n    trackGameProgress: (progressData) => {}\n};\n\nexport const init = () => {\n    /**\n     * Call to internal API to set this game as viewed\n     */\n    const setGameLoaded = async () => {\n        const webglid = $('.webgl-iframe-content-loader').data('webgl');\n\n        const response = await fetchMany([{\n            methodname: 'mod_webgl_signal_game_loaded',\n            args: {'webglid': webglid}\n        }])[0];\n\n        if (!response) {\n            window.console.error('Error setting webgl ' + webglid + ' as viewed');\n        }\n        window.console.log(response);\n\n    };\n\n    const setGameProgress = (progressData) => {\n        window.console.error('>>>WORK IN PROGRESS - THIS SHOULD MARK SOME OF THE UNITY GAME ACTIVITY PROGRESS');\n        window.console.log(progressData);\n    };\n\n    window.mod_webgl_plugin.trackGameViewed = setGameLoaded;\n    window.mod_webgl_plugin.trackGameProgress = setGameProgress;\n\n    window.console.error('>>>unityGame setup ready');\n    window.mod_webgl_plugin.initted = true;\n};"],"names":["window","mod_webgl_plugin","initted","trackGameViewed","trackGameProgress","progressData","async","webglid","data","response","methodname","args","console","error","log"],"mappings":"6OAgBAA,OAAOC,iBAAmB,CACtBC,SAAS,EACTC,gBAAiB,OACjBC,kBAAoBC,gCAGJ,KAwBhBL,OAAOC,iBAAiBE,gBApBFG,gBACZC,SAAU,mBAAE,gCAAgCC,KAAK,SAEjDC,eAAiB,cAAU,CAAC,CAC9BC,WAAY,+BACZC,KAAM,SAAYJ,YAClB,GAECE,UACDT,OAAOY,QAAQC,MAAM,uBAAyBN,QAAU,cAE5DP,OAAOY,QAAQE,IAAIL,WAUvBT,OAAOC,iBAAiBG,kBANCC,eACrBL,OAAOY,QAAQC,MAAM,mFACrBb,OAAOY,QAAQE,IAAIT,eAMvBL,OAAOY,QAAQC,MAAM,4BACrBb,OAAOC,iBAAiBC,SAAU"}